"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([["7067"],{74671:function(e,n,i){i.r(n),i.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>s,assets:()=>l,toc:()=>c,contentTitle:()=>a});var s=JSON.parse('{"id":"usage/intro","title":"Your first pipeline","description":"Let\'s get started and create your first pipeline.","source":"@site/versioned_docs/version-2.7/20-usage/10-intro.md","sourceDirName":"20-usage","slug":"/usage/intro","permalink":"/docs/2.7/usage/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/versioned_docs/version-2.7/20-usage/10-intro.md","tags":[],"version":"2.7","sidebarPosition":10,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Welcome to Woodpecker","permalink":"/docs/2.7/intro/"},"next":{"title":"Terminology","permalink":"/docs/2.7/usage/terminology/"}}'),o=i("96773"),t=i("24027");let r={},a="Your first pipeline",l={},c=[{value:"1. Repository Activation",id:"1-repository-activation",level:2},{value:"2. Define first workflow",id:"2-define-first-workflow",level:2},{value:"3. Push the file and trigger first pipeline",id:"3-push-the-file-and-trigger-first-pipeline",level:2},{value:"4. Use a plugin for reusable tasks",id:"4-use-a-plugin-for-reusable-tasks",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"your-first-pipeline",children:"Your first pipeline"})}),"\n",(0,o.jsx)(n.p,{children:"Let's get started and create your first pipeline."}),"\n",(0,o.jsx)(n.h2,{id:"1-repository-activation",children:"1. Repository Activation"}),"\n",(0,o.jsxs)(n.p,{children:["To activate your repository in Woodpecker navigate to the repository list and ",(0,o.jsx)(n.code,{children:"New repository"}),". You will see a list of repositories from your forge (GitHub, Gitlab, ...) which can be activated with a simple click."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"new repository list",src:i(90824).Z+"",width:"2732",height:"2048"})}),"\n",(0,o.jsxs)(n.p,{children:["To enable a repository in Woodpecker you must have ",(0,o.jsx)(n.code,{children:"Admin"})," rights on that repository, so that Woodpecker can add something\nthat is called a webhook (Woodpecker needs it to know about actions like pushes, pull requests, tags, etc.)."]}),"\n",(0,o.jsx)(n.h2,{id:"2-define-first-workflow",children:"2. Define first workflow"}),"\n",(0,o.jsxs)(n.p,{children:["After enabling a repository Woodpecker will listen for changes in your repository. When a change is detected, Woodpecker will check for a pipeline configuration. So let's create a file at ",(0,o.jsx)(n.code,{children:".woodpecker/my-first-workflow.yaml"})," inside your repository:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title=".woodpecker/my-first-workflow.yaml"',children:'when:\n  - event: push\n    branch: main\n\nsteps:\n  - name: build\n    image: debian\n    commands:\n      - echo "This is the build step"\n      - echo "binary-data-123" > executable\n  - name: a-test-step\n    image: golang:1.16\n    commands:\n      - echo "Testing ..."\n      - ./executable\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"So what did we do here?"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["We defined your first workflow file ",(0,o.jsx)(n.code,{children:"my-first-workflow.yaml"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["This workflow will be executed when a push event happens on the ",(0,o.jsx)(n.code,{children:"main"})," branch,\nbecause we added a filter using the ",(0,o.jsx)(n.code,{children:"when"})," section:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-diff",children:"+ when:\n+   - event: push\n+     branch: main\n\n...\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["We defined two steps: ",(0,o.jsx)(n.code,{children:"build"})," and ",(0,o.jsx)(n.code,{children:"a-test-step"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The steps are executed in the order they are defined, so ",(0,o.jsx)(n.code,{children:"build"})," will be executed first and then ",(0,o.jsx)(n.code,{children:"a-test-step"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.code,{children:"build"})," step we use the ",(0,o.jsx)(n.code,{children:"debian"}),' image and build a "binary file" called ',(0,o.jsx)(n.code,{children:"executable"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.code,{children:"a-test-step"})," we use the ",(0,o.jsx)(n.code,{children:"golang:1.16"})," image and run the ",(0,o.jsx)(n.code,{children:"executable"})," file to test it."]}),"\n",(0,o.jsxs)(n.p,{children:["You can use any image from registries like the ",(0,o.jsx)(n.a,{href:"https://hub.docker.com/search?type=image",children:"Docker Hub"})," you have access to:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-diff",children:" steps:\n   - name: build\n-    image: debian\n+    image: mycompany/image-with-awscli\n     commands:\n       - aws help\n"})}),"\n",(0,o.jsx)(n.h2,{id:"3-push-the-file-and-trigger-first-pipeline",children:"3. Push the file and trigger first pipeline"}),"\n",(0,o.jsx)(n.p,{children:"If you push this file to your repository now, Woodpecker will already execute your first pipeline."}),"\n",(0,o.jsxs)(n.p,{children:["You can check the pipeline execution in the Woodpecker UI by navigating to the ",(0,o.jsx)(n.code,{children:"Pipelines"})," section of your repository."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"pipeline view",src:i(37508).Z+"",width:"2732",height:"2048"})}),"\n",(0,o.jsxs)(n.p,{children:["As you probably noticed, there is another step in called ",(0,o.jsx)(n.code,{children:"clone"})," which is executed before your steps. This step clones your repository into a folder called ",(0,o.jsx)(n.code,{children:"workspace"})," which is available throughout all steps."]}),"\n",(0,o.jsx)(n.p,{children:"This for example allows the first step to build your application using your source code and as the second step will receive\nthe same workspace it can use the previously built binary and test it."}),"\n",(0,o.jsx)(n.h2,{id:"4-use-a-plugin-for-reusable-tasks",children:"4. Use a plugin for reusable tasks"}),"\n",(0,o.jsxs)(n.p,{children:["Sometimes you have some tasks that you need to do in every project. For example, deploying to Kubernetes or sending a Slack message. Therefore you can use one of the ",(0,o.jsx)(n.a,{href:"/plugins",children:"official and community plugins"})," or simply ",(0,o.jsx)(n.a,{href:"/docs/2.7/usage/plugins/creating-plugins",children:"create your own"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"If you want to get a Slack notification after your pipeline has finished, you can add a Slack plugin to your pipeline:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"---\n- name: notify me on Slack\n  image: plugins/slack\n  settings:\n    channel: developers\n    username: woodpecker\n    password:\n      from_secret: slack_token\n  when:\n    status: [success, failure] # This will execute the step on success and failure\n"})}),"\n",(0,o.jsxs)(n.p,{children:["To configure a plugin you can use the ",(0,o.jsx)(n.code,{children:"settings"})," section."]}),"\n",(0,o.jsxs)(n.p,{children:["Sometime you need to provide secrets to the plugin. You can do this by using the ",(0,o.jsx)(n.code,{children:"from_secret"})," key. The secret must be defined in the Woodpecker UI. You can find more information about secrets ",(0,o.jsx)(n.a,{href:"/docs/2.7/usage/secrets",children:"here"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Similar to the ",(0,o.jsx)(n.code,{children:"when"})," section at the top of the file which is for the complete workflow, you can use the ",(0,o.jsx)(n.code,{children:"when"})," section for each step to define when a step should be executed."]}),"\n",(0,o.jsxs)(n.p,{children:["Learn more about ",(0,o.jsx)(n.a,{href:"/docs/2.7/usage/plugins/overview",children:"plugins"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["As you now have a basic understanding of how to create a pipeline, you can dive deeper into the ",(0,o.jsx)(n.a,{href:"/docs/2.7/usage/workflow-syntax",children:"workflow syntax"})," and ",(0,o.jsx)(n.a,{href:"/docs/2.7/usage/plugins/overview",children:"plugins"}),"."]})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},37508:function(e,n,i){i.d(n,{Z:function(){return s}});let s=i.p+"assets/images/pipeline-b4530501d221d519a3037e16560f0622.png"},90824:function(e,n,i){i.d(n,{Z:function(){return s}});let s=i.p+"assets/images/repo-new-653efed01291632be1032d3d9e45513d.png"},24027:function(e,n,i){i.d(n,{Z:function(){return a},a:function(){return r}});var s=i(41699);let o={},t=s.createContext(o);function r(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);