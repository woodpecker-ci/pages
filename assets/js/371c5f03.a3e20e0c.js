/*! For license information please see 371c5f03.a3e20e0c.js.LICENSE.txt */
"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([[332],{94476:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var o=t(2488),i=t(37052);const s={toc_max_heading_level:3},a="Local backend",r={id:"administration/backends/local",title:"Local backend",description:"The local backend will execute the pipelines on the local system without any isolation of any kind.",source:"@site/docs/30-administration/22-backends/20-local.md",sourceDirName:"30-administration/22-backends",slug:"/administration/backends/local",permalink:"/docs/next/administration/backends/local",draft:!1,unlisted:!1,editUrl:"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/docs/30-administration/22-backends/20-local.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{toc_max_heading_level:3},sidebar:"tutorialSidebar",previous:{title:"Docker backend",permalink:"/docs/next/administration/backends/docker"},next:{title:"Kubernetes backend",permalink:"/docs/next/administration/backends/kubernetes"}},c={},l=[{value:"Usage",id:"usage",level:2},{value:"Shell",id:"shell",level:3},{value:"Plugins",id:"plugins",level:3},{value:"Options",id:"options",level:3},{value:"<code>WOODPECKER_BACKEND_LOCAL_TEMP_DIR</code>",id:"woodpecker_backend_local_temp_dir",level:4}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,i.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"local-backend",children:"Local backend"}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsx)(n.p,{children:"The local backend will execute the pipelines on the local system without any isolation of any kind."})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Currently we do not support services for this backend.\n",(0,o.jsx)(n.a,{href:"https://github.com/woodpecker-ci/woodpecker/issues/3095",children:"Read more here"}),"."]})}),"\n",(0,o.jsxs)(n.p,{children:["Since the code runs directly in the same context as the agent (same user, same\nfilesystem), a malicious pipeline could be used to access the agent\nconfiguration especially the ",(0,o.jsx)(n.code,{children:"WOODPECKER_AGENT_SECRET"})," variable."]}),"\n",(0,o.jsx)(n.p,{children:"It is recommended to use this backend only for private setup where the code and\npipeline can be trusted. You shouldn't use it for a public facing CI where\nanyone can submit code or add new repositories. You shouldn't execute the agent\nas a privileged user (root)."}),"\n",(0,o.jsxs)(n.p,{children:["The local backend will use a random directory in ",(0,o.jsx)(n.code,{children:"$TMPDIR"})," to store the cloned\ncode and execute commands."]}),"\n",(0,o.jsxs)(n.p,{children:["In order to use this backend, you need to download (or build) the\n",(0,o.jsx)(n.a,{href:"https://github.com/woodpecker-ci/woodpecker/releases/latest",children:"binary"})," of the\nagent, configure it and run it on the host machine."]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.p,{children:"To enable the local backend, add this to your configuration:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",children:"WOODPECKER_BACKEND=local\n"})}),"\n",(0,o.jsx)(n.h3,{id:"shell",children:"Shell"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"image"})," entry is used to specify the shell, such as Bash or Fish, that is\nused to run the commands."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title=".woodpecker.yaml"',children:"steps:\n  - name: build\n    image: bash\n    commands: [...]\n"})}),"\n",(0,o.jsx)(n.h3,{id:"plugins",children:"Plugins"}),"\n",(0,o.jsx)(n.p,{children:"Plugins are just executable binaries:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"steps:\n  - name: build\n    image: /usr/bin/tree\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If no commands are provided, we treat them as plugins in the usual manner.\nIn the context of the local backend, plugins are simply executable binaries, which can be located using their name if they are listed in ",(0,o.jsx)(n.code,{children:"$PATH"}),", or through an absolute path."]}),"\n",(0,o.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,o.jsx)(n.h4,{id:"woodpecker_backend_local_temp_dir",children:(0,o.jsx)(n.code,{children:"WOODPECKER_BACKEND_LOCAL_TEMP_DIR"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Default: default temp directory"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Directory to create folders for workflows."})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},38088:(e,n,t)=>{var o=t(96651),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var o,s={},l=null,d=null;for(o in void 0!==t&&(l=""+t),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(d=n.ref),n)a.call(n,o)&&!c.hasOwnProperty(o)&&(s[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===s[o]&&(s[o]=n[o]);return{$$typeof:i,type:e,key:l,ref:d,props:s,_owner:r.current}}n.Fragment=s,n.jsx=l,n.jsxs=l},2488:(e,n,t)=>{e.exports=t(38088)},37052:(e,n,t)=>{t.d(n,{I:()=>r,M:()=>a});var o=t(96651);const i={},s=o.createContext(i);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);