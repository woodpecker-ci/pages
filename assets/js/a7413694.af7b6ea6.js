/*! For license information please see a7413694.af7b6ea6.js.LICENSE.txt */
"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([[3198],{52090:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=i(13274),t=i(74169);const r={},s="Matrix builds",o={id:"usage/matrix-builds",title:"Matrix builds",description:"Woodpecker has integrated support for matrix builds. Woodpecker executes a separate build task for each combination in the matrix, allowing you to build and test a single commit against multiple configurations.",source:"@site/versioned_docs/version-0.15/20-usage/30-matrix-builds.md",sourceDirName:"20-usage",slug:"/usage/matrix-builds",permalink:"/docs/0.15/usage/matrix-builds",draft:!1,unlisted:!1,editUrl:"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/versioned_docs/version-0.15/20-usage/30-matrix-builds.md",tags:[],version:"0.15",sidebarPosition:30,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Multi pipelines",permalink:"/docs/0.15/usage/multi-pipeline"},next:{title:"Secrets",permalink:"/docs/0.15/usage/secrets"}},l={},d=[{value:"Interpolation",id:"interpolation",level:2},{value:"Examples",id:"examples",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"matrix-builds",children:"Matrix builds"}),"\n",(0,a.jsx)(n.p,{children:"Woodpecker has integrated support for matrix builds. Woodpecker executes a separate build task for each combination in the matrix, allowing you to build and test a single commit against multiple configurations."}),"\n",(0,a.jsx)(n.p,{children:"Example matrix definition:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"matrix:\n  GO_VERSION:\n    - 1.4\n    - 1.3\n  REDIS_VERSION:\n    - 2.6\n    - 2.8\n    - 3.0\n"})}),"\n",(0,a.jsx)(n.p,{children:"Example matrix definition containing only specific combinations:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"matrix:\n  include:\n    - GO_VERSION: 1.4\n      REDIS_VERSION: 2.8\n    - GO_VERSION: 1.5\n      REDIS_VERSION: 2.8\n    - GO_VERSION: 1.6\n      REDIS_VERSION: 3.0\n"})}),"\n",(0,a.jsx)(n.h2,{id:"interpolation",children:"Interpolation"}),"\n",(0,a.jsxs)(n.p,{children:["Matrix variables are interpolated in the yaml using the ",(0,a.jsx)(n.code,{children:"${VARIABLE}"})," syntax, before the yaml is parsed. This is an example yaml file before interpolating matrix parameters:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  build:\n    image: golang:${GO_VERSION}\n    commands:\n      - go get\n      - go build\n      - go test\n\nservices:\n  database:\n    image: ${DATABASE}\n\nmatrix:\n  GO_VERSION:\n    - 1.4\n    - 1.3\n  DATABASE:\n    - mysql:5.5\n    - mysql:6.5\n    - mariadb:10.1\n"})}),"\n",(0,a.jsx)(n.p,{children:"Example Yaml file after injecting the matrix parameters:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-diff",children:"pipeline:\n  build:\n-   image: golang:${GO_VERSION}\n+   image: golang:1.4\n    commands:\n      - go get\n      - go build\n      - go test\n+   environment:\n+     - GO_VERSION=1.4\n+     - DATABASE=mysql:5.5\n\nservices:\n  database:\n-   image: ${DATABASE}\n+   image: mysql:5.5\n"})}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(n.p,{children:"Example matrix build based on Docker image tag:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  build:\n    image: golang:${TAG}\n    commands:\n      - go build\n      - go test\n\nmatrix:\n  TAG:\n    - 1.7\n    - 1.8\n    - latest\n"})}),"\n",(0,a.jsx)(n.p,{children:"Example matrix build based on Docker image:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"pipeline:\n  build:\n    image: ${IMAGE}\n    commands:\n      - go build\n      - go test\n\nmatrix:\n  IMAGE:\n    - golang:1.7\n    - golang:1.8\n    - golang:latest\n"})})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},78034:(e,n,i)=>{var a=i(79474),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,i){var a,r={},d=null,c=null;for(a in void 0!==i&&(d=""+i),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(c=n.ref),n)s.call(n,a)&&!l.hasOwnProperty(a)&&(r[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===r[a]&&(r[a]=n[a]);return{$$typeof:t,type:e,key:d,ref:c,props:r,_owner:o.current}}n.Fragment=r,n.jsx=d,n.jsxs=d},13274:(e,n,i)=>{e.exports=i(78034)},74169:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var a=i(79474);const t={},r=a.createContext(t);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);